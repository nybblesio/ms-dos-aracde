;ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
;³ one-on-one                                        ³
;ÃÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ´
;³                                                   ³
;³ copyright (C) 2017 jeff panici                    ³
;³ https://nybbles.io                                ³
;³                                                   ³
;³                                                   ³
;³                                                   ³
;ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ

;ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
;³ constants and structures                          ³
;ÃÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ´
;³                                                   ³
;³                                                   ³
;³                                                   ³
;ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ

J_CTL_PORT      equ 0201h
J_MASK_BTN_1    equ 010h
J_MASK_BTN_2    equ 020h
J_MASK_BTN_3    equ 040h
J_MASK_BTN_4    equ 080h

K_ESC           equ 01h
K_ENTER         equ 01ch
K_CTRL          equ 01dh
K_A             equ 01eh
K_S             equ 01fh
K_D             equ 020h
K_W             equ 011h
K_LSHIFT        equ 02ah
K_RSHIFT        equ 036h
K_LALT          equ 038h
K_SPACE         equ 039h
K_UP            equ 048h
K_LEFT          equ 04bh
K_RIGHT         equ 04dh
K_DOWN          equ 050h
K_ESCAPE1       equ 0e0h
K_ESCAPE2       equ 0e1h

T_INPUT_KEY     equ 1
T_INPUT_MOUSE   equ 2
T_INPUT_JOY     equ 3

input_event struc [bp]
    ie_type     db ?
    ie_code     db ?
    ie_data1    dw ?
    ie_data2    dw ?
ends

input_action struc [bp]
    ia_type     db ?
    ia_code     db ?
    ia_callback dw ?
    ia_data1    dw ?
    ia_data2    dw ?
ends

defie macro
    db #1, #2
    dw #3, #4, #5
#em

;ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
;³ variables                                         ³
;ÃÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ´
;³                                                   ³
;³                                                   ³
;³                                                   ³
;ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ

even

input_queue     db ((type input_event) * 256) dup ?
input_head      dw ?
input_tail      dw ?
input_j1_b1     db ?
input_j1_b2     db ?
input_j1_b3     db ?
input_j1_b4     db ?
input_j2_b1     db ?
input_j2_b2     db ?
input_j2_b3     db ?
input_j2_b4     db ?

;ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
;³ input processing functions                        ³
;ÃÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ´
;³                                                   ³
;³                                                   ³
;³                                                   ³
;ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
_next_event:
    ret

next_event macro
#em

_read_inputs:
    ret

read_inputs macro
#em

_joy_buttons:
    cli
    mov     dx, J_CTL_PORT
    xor     ax, ax
    in      al, dx
    mov     bl, al
    and     bl, J_MASK_BTN_1
    mov     input_j1_b1, bl
    mov     bl, al
    and     bl, J_MASK_BTN_2
    mov     input_j1_b2, bl
    mov     bl, al
    and     bl, J_MASK_BTN_3
    mov     input_j1_b3, bl
    mov     bl, al
    and     bl, J_MASK_BTN_4
    mov     input_j1_b4, bl
    sti
    ret
;
;
;
